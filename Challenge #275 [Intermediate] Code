import java.util.ArrayList;
import java.io.*;

public class Challenge {

/* CHALLENGE PROMPT [Splurthian Chemistry 102]
The Splurth Council of Atoms and Atom-Related Paraphernalia has decided to keep their current naming conventions, 
as listed in the Easy challenge, but to add a preference system. So while there are still 6 valid symbols for the element Iron, 
the preferred symbol is Ir. The second-most preferred symbol is Io, then In, Ro, Rn, and finally On. A symbol is preferred based 
on how early in the element name its first letter is, followed by how early its second letter is. In the case of repeated letters 
like in Neon, Eo is preferred to En, even though an n is closer to the beginning of Neon than the o is. This is because it's 
the second n that's used in the symbol En, since the second letter in the symbol must appear after the first.
When the Council receives a new element to add to the table, it chooses the most preferred valid symbol for that element that's 
not already taken by another element. For instance, if Chlorine were the first element added, then it would get the symbol Ch. 
If Chromium was added later, it would get the symbol Cr. If Cesium and Cerium were then added, they would get the symbols Ce and Ci. 
If there are no valid symbols for the new element.... well, that's why the Council needs you.

The Council has decided to wipe the table clean and start afresh. The list of all 366 elements known to Splurthians are set to be
assigned a symbol, one by one, in the order in that text file, following the preference rules above. Determine the symbol assigned 
to each element in the list. For instance, you should find that Protactinium is assigned Pt, Californium is assigned Cf, and 
Lionium is assigned Iu. Find the first element that will not be able to have a symbol assigned, because when you get to it all 
the valid symbols for it are taken. (You can stop assigning symbols at this point if you like.) Post this element along with 
your solution, as a check. */

  public static void main(String[] args){
      File textFile = new File("Splurthian Elements.txt");
      preferredSymbol(textFile);
  }

  public static void preferredSymbol(File textFile){
      //Using a hashmap to map the preferred symbol to it's element.
      HashMap<String, String> elementSyms = new HashMap<String, String>();
      //Arraylist to store each element in given file.
      ArrayList<String> allLines = new ArrayList<String>();
      Dumps each element into ArrayList
      readLines(textFile, allLines);

      for(String line : allLines){
          String symbol = findSymbol(line, elementSyms);
          //This will indicate which element does not have a symbol it can use.
          if(symbol == null){
              System.out.println(line + " is the first element without an assigned symbol.");
              break;
          }
      }
  }

  public static String findSymbol(String line, HashMap<String, String> map){
      for(int outer = 0; outer < line.length()-1; outer++){
          for(int inner = 1; inner < line.length(); inner++){
              //Possible symbol for element
              String tempSym = charsToString(line.charAt(outer), line.charAt(inner));
              //Checking for available symbol
              if(!(map.containsKey(tempSym)){
                  map.put(tempSym, line);
                  return tempSym;
              }
          }
      }

      //Preferred element symbol is not available.
      return null;
  }

  public static String charsToString(char first, char second){
      //First letter of a 2 character element symbol is always capitalized.
      return "" + (String.valueOf(first)).toUpperCase() + (String.valueOf(second)).toLowerCase();
  }

  public staic void readLines(File file, ArrayList<String> lineList){
      BufferedReader buffer = new BufferedReader(new FileReader(file));

      try{
          String text = buffer.readLine();
          while(text != null){
              lineList.add(text);
              text = buffer.readLine();
      } catch(Exception e) {
          e.printStackTrace();
      }
  }

}
